(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{20880:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return t(57485)}])},56001:function(e,n,t){"use strict";t.d(n,{K:function(){return l},b:function(){return r}});var l="Gifty",r="pk_test_51KLNAfBiwDSxURARdoxGugM3IDVl4gb67C8iUq8jFLCbnVpQeL6U3zf8PSLlmCOq2rROe3m2fgjj4bBr7cYSd2tV00Ca6RiYKa"},80565:function(e,n,t){"use strict";var l=t(85893),r=t(11163),s=t(41664),o=t.n(s),i=t(47921),a=t(50458),c=t(18442),d=t(67294),u=t(2891),m=t(74995),f=t(31567);function h(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}n.Z=function(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));var n,t,s=(0,d.useState)(!1),o=s[0],p=s[1],x=(0,r.useRouter)(),g=(0,u.ZP)().user_profile_api_data,b=(0,m.ZP)(),j=b.setAddressSource,w=b.address_source,y=(0,f.$)().t,N=(0,u.sR)();return(0,d.useEffect)((function(){N=(0,u.sR)()}),[g]),(0,l.jsxs)("div",{className:"bg-white shadow h-screen w-[18rem] hidden md:block",children:[(0,l.jsxs)("div",{className:"pt-0",children:[(0,l.jsxs)("div",{onClick:function(){return x.push("/profile")},className:"py-5 flex items-center space-x-3 border-b mb-8 px-5 cursor-pointer",children:[(0,l.jsx)("div",{className:"bg-gray-400 h-8 w-8 relative overflow-hidden rounded-full",children:(0,l.jsx)("img",{className:"h-full w-full rounded-full",src:null!==(n=null===N||void 0===N?void 0:N.image_url)&&void 0!==n?n:"/Images/profile.png",alt:"Post Card Image",layout:"fill",objectFit:"cover"})}),(0,l.jsx)("div",{className:"text-md inline truncate w-3/4 ".concat("/profile"==x.pathname&&"text-cBrand font-bold"),children:null!==(t=null===N||void 0===N?void 0:N.name)&&void 0!==t?t:"NA"})]}),(0,l.jsxs)("div",{className:"flex flex-col justify-between space-y-4 text-md pb-3",children:[(0,l.jsx)(v,{title:y("Account Settings"),link:"/profile/account-settings"}),(0,l.jsx)(v,{onClick:function(){return j(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(n){h(e,n,t[n])}))}return e}({},w,{is_from_create:!1}))},title:y("Address Book"),link:"/profile/address-book"}),(0,l.jsx)(v,{title:y("Order History"),link:"/profile/order-history"}),(0,l.jsx)("div",{onClick:function(){return p(!0)},className:"p-2 px-5 cp",children:y("Logout")})]})]}),(0,l.jsx)(i.default,{show_modal:o,setShowModal:p,onConfirm:function(){try{localStorage.removeItem("postcard_token"),(0,c.Z)({token:null}),p(!1),x.push("/"),(0,a.C)({message:y("Logged out successfully!"),type:"success"})}catch(e){(0,a.C)({message:y("An error occurred!"),type:"error"})}}})]})};var v=function(e){var n=e.title,t=e.link,s=e.onClick,i=void 0===s?function(){}:s,a=(0,r.useRouter)();return(0,l.jsx)("div",{onClick:i,className:"p-2 px-5 cp ".concat(a.pathname=="".concat(t)&&"bg-cTintBrick text-cBrand font-fw600"),children:(0,l.jsx)(o(),{href:t,children:n})})}},57485:function(e,n,t){"use strict";t.r(n);var l=t(34051),r=t.n(l),s=t(85893),o=t(37677),i=t(30622),a=t(80565),c=t(67294),d=t(2891),u=t(9008),m=t(56001),f=t(40519),h=t(99799),v=t(63750),p=t(78063),x=t(31567),g=t(42154),b=t(8293);function j(e,n,t,l,r,s,o){try{var i=e[s](o),a=i.value}catch(c){return void t(c)}i.done?n(a):Promise.resolve(a).then(l,r)}n.default=function(){var e=(0,c.useState)({}),n=e[0],t=e[1],l=(0,d.ZP)(),w=l.user_profile,y=l.changeUserProfileValue,N=l.changeUserProfileValueWithoutEvent,_=(0,b.ZP)(),k=_.is_show_account_delete_modal,C=_.setIsShowAccountDeleteModal;(0,c.useEffect)((function(){T(),(0,d.ck)()}),[]);var P,S,E,A,O=(0,c.useRef)(null),Z=(0,c.useState)(null),R=(Z[0],Z[1]),B=(0,c.useState)(!1),I=B[0],F=B[1],L=(0,c.useState)([!0,!1,!1,!1]),D=L[0],M=L[1],U=(0,c.useState)(!0),V=U[0],K=U[1],T=function(){var e,n,l,r,s,o,i=JSON.parse(localStorage.getItem("user"));t(i),N("name",null!==(e=i.name)&&void 0!==e?e:""),N("email",null!==(n=i.email)&&void 0!==n?n:""),N("phone",null!==(l=i.phone)&&void 0!==l?l:""),N("address",null!==(r=i.address)&&void 0!==r?r:""),N("city",null!==(s=i.city)&&void 0!==s?s:""),N("post_code",null!==(o=i.post_code)&&void 0!==o?o:""),N("image",i.image_url?i.image_url.includes("http")?i.image_url:h.xw+i.image_url:null)},q=function(){var e,n=(e=r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,(0,d.Wu)(I);case 3:T();case 4:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(l,r){var s=e.apply(n,t);function o(e){j(s,l,r,o,i,"next",e)}function i(e){j(s,l,r,o,i,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}(),G=(0,x.$)().t;return(0,s.jsxs)("div",{children:[(0,s.jsxs)(u.default,{children:[(0,s.jsxs)("title",{children:[m.K," | Profile"]}),(0,s.jsx)("meta",{name:"description",content:"Post Card Printing"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(a.Z,{user:n}),(0,s.jsx)("div",{className:"relative pt-16 w-full",children:(0,s.jsxs)("div",{className:"bg-white md:shadow px-5 md:p-6 md:max-w-2xl rounded-lg md:m-10",children:[(0,s.jsx)("div",{className:"text-4xl font-semibold text-gray-800 mb-5 hidden md:block",children:G("My Account")}),(0,s.jsxs)("form",{onSubmit:q,children:[(0,s.jsxs)("div",{className:"md:flex justify-between items-center md:space-x-10",children:[(0,s.jsxs)("div",{className:"y-center !hidden md:!flex w-1/3",children:[(0,s.jsxs)("div",{className:"bg-gray-400 h-20 w-20 relative overflow-hidden rounded-full mb-3",children:[(0,s.jsx)("input",{onChange:function(e){(0,f.y3)(e.target.files[0],(function(e){R(e),F(!0),N("image",e),console.log("result",w)}))},type:"file",id:"file",ref:O,style:{display:"none"}}),(0,s.jsx)("img",{onClick:function(){return O.current.click()},className:"h-full w-full cp",src:null!==(P=null===w||void 0===w?void 0:w.image)&&void 0!==P?P:"/Images/profile.png",alt:"Post Card Image",layout:"fill",objectFit:"cover"})]}),(0,s.jsx)("div",{className:"text-sm font-semibold text-center truncate w-1/2",children:null!==(S=n.name)&&void 0!==S?S:"NA"})]}),(0,s.jsx)("div",{className:"py-4 border-b mb-5 md:hidden flex items-center justify-between space-x-3",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"bg-gray-400 h-8 w-8 relative overflow-hidden rounded-full",children:(0,s.jsx)("img",{onClick:function(){return O.current.click()},className:"h-full w-full rounded-full cp",src:null!==(E=null===w||void 0===w?void 0:w.image)&&void 0!==E?E:o.PROFILE_JPG,alt:"Post Card Image",layout:"fill",objectFit:"cover"})}),(0,s.jsx)("div",{className:"text-lg text-center font-bold w-1/2 truncate",children:null!==(A=n.name)&&void 0!==A?A:"NA"})]})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(i.Z,{name:"name",value:null===w||void 0===w?void 0:w.name,label:G("Name"),placeholder:G("Enter Your Name"),is_required:!0,onChange:function(e){return y(e)}}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(i.Z,{name:"email",value:null===w||void 0===w?void 0:w.email,label:G("Email"),placeholder:G("Enter Email Address"),is_readonly:!0}),(0,s.jsx)(p.Z,{title:G("Email cannot be changed!"),color:"#FB607F",children:(0,s.jsx)(v.LSF,{className:"absolute top-[50px] right-3 h-5 w-5 cursor-help"})},"color")]}),(0,s.jsx)(i.Z,{name:"phone",value:null===w||void 0===w?void 0:w.phone,label:G("Phone"),placeholder:G("Enter Phone Number"),onChange:function(e){e.target.value=e.target.value.replace(/[^0-9]/g,"");var n=e.target.value;n.length>15||N("phone",n)}}),(0,s.jsx)(i.Z,{name:"address",value:null===w||void 0===w?void 0:w.address,label:G("Address"),placeholder:G("Enter Address"),onChange:y}),(0,s.jsx)(i.Z,{name:"post_code",value:null===w||void 0===w?void 0:w.post_code,label:G("Post Code"),placeholder:G("Enter Post Code"),onChange:function(e){e.target.value=e.target.value.replace(/[^0-9]/g,"");var n=e.target.value;n.length>8||N("post_code",n)}}),(0,s.jsx)(i.Z,{name:"city",value:null===w||void 0===w?void 0:w.city,label:G("City"),placeholder:G("Enter City"),onChange:y})]})]}),(0,s.jsxs)("div",{className:"flex flex-row justify-between w-full mt-10 md:mt-0",children:[(0,s.jsx)("button",{type:"button",onClick:function(){C(!0),K(!0),M([!0,!1,!1,!1])},className:" mt-2 px-5 py-3 md:py-2 bg-cRed hover:bg-cBrickHover text-white transition-all ease-in rounded-md text-sm md:text-base font-bold shadow",children:(0,s.jsx)("span",{className:"",children:G("Delete Account")})}),(0,s.jsx)("button",{type:"submit",className:" mt-2 px-5 py-3 md:py-2 bg-cBrand hover:bg-cBrickHover text-white transition-all ease-in rounded-md text-sm md:text-base font-bold shadow",children:(0,s.jsx)("span",{className:"",children:G("Save Changes")})})]})]})]})})]}),(0,s.jsx)(g.default,{show_modal:k,setShowModal:C,checked:D,setChecked:M,reason:V,setReason:K})]})}},9008:function(e,n,t){e.exports=t(83121)}},function(e){e.O(0,[3617,8063,2154,9774,2888,179],(function(){return n=20880,e(e.s=n);var n}));var n=e.O();_N_E=n}]);