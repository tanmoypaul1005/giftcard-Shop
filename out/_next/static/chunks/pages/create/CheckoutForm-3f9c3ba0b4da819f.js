(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6748],{82024:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create/CheckoutForm",function(){return r(83782)}])},83782:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var n=r(34051),o=r.n(n),a=r(85893),i=r(67294),s=r(86664),c=r(11163),u=r(74995),l=r(31567),d=r(63750);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,o)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(c){s=!0,o=c}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(){var e=(0,s.useStripe)(),t=(0,s.useElements)(),r=p(i.useState(null),2),n=r[0],f=r[1],y=p(i.useState(!1),2),h=y[0],v=y[1],b=(0,c.useRouter)().pathname;i.useEffect((function(){if(e){var t=new URLSearchParams(window.location.search).get("payment_intent_client_secret");t&&e.retrievePaymentIntent(t).then((function(e){var t=e.paymentIntent;switch(t.status){case"succeeded":f("Payment succeeded!"),console.log("paymentIntent: ",t);break;case"processing":f("Your payment is processing.");break;case"requires_payment_method":f("Your payment was not successful, please try again.");break;default:f("Something went wrong.")}}))}}),[e]);var w=window.location.origin?window.location.origin:"",x=function(){var r,n=(r=o().mark((function r(n){var a,i;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),e&&t){r.next=3;break}return r.abrupt("return");case 3:return v(!0),r.next=6,e.confirmPayment({elements:t,confirmParams:{return_url:"/profile/order-history"==b?w+"/create/DuePaymentConfirmation":w+"/create/PaymentConfirmation"}});case 6:a=r.sent,console.log("payment result",a),"card_error"===(null===(i=a.error)||void 0===i?void 0:i.type)||"validation_error"===(null===i||void 0===i?void 0:i.type)?f(i.message):(console.log("error",i),f("An unexpected error occurred.")),v(!1);case 11:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function i(e){m(a,n,o,i,s,"next",e)}function s(e){m(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),g=(0,l.$)().t;return(0,a.jsxs)("form",{className:"w-full",id:"payment-form",onSubmit:x,children:[(0,a.jsx)(s.PaymentElement,{id:"payment-element",options:{layout:"tabs"}}),(0,a.jsxs)("div",{className:"flex flex-row justify-start space-x-2 mb-5 items-center",children:[(0,a.jsx)(d.FPm,{}),(0,a.jsx)("div",{className:"text-cBrand text-fs14",children:"No card info will be saved"})]}),(0,a.jsxs)("div",{className:"flex flex-row ".concat("/profile/order-history"==b?"justify-center":"justify-between"," space-x-0"),children:["/profile/order-history"!=b&&(0,a.jsx)("button",{onClick:function(){return u.ZP.getState().setCurrState("choose_frame")},className:" px-12 py-2 bg-white hover:bg-gray-600 text-gray-600 hover:text-white transition-all ease-in rounded-md text-sm md:text-base font-bold shadow",children:g("Back")}),(0,a.jsx)("button",{className:"bg-cBrand text-cWhite rounded-br5 border-0 px-3 py-2 cursor-pointer font-fw600 block w-auto hover:contrast-125 disabled:opacity-50 disabled:cursor-default shadow-md",disabled:h||!e||!t,id:"submit",children:(0,a.jsx)("span",{id:"button-text",children:h?(0,a.jsx)("div",{className:"spinner",id:"spinner"}):g("Confirm Payment")})})]}),n&&(0,a.jsx)("div",{id:"payment-message",children:n})]})}}},function(e){e.O(0,[6664,9774,2888,179],(function(){return t=82024,e(e.s=t);var t}));var t=e.O();_N_E=t}]);