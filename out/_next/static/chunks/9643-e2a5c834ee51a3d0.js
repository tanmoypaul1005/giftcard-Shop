"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9643],{56001:function(e,t,i){i.d(t,{K:function(){return n},b:function(){return s}});var n="Gifty",s="pk_test_51KLNAfBiwDSxURARdoxGugM3IDVl4gb67C8iUq8jFLCbnVpQeL6U3zf8PSLlmCOq2rROe3m2fgjj4bBr7cYSd2tV00Ca6RiYKa"},83782:function(e,t,i){i.r(t),i.d(t,{default:function(){return f}});var n=i(34051),s=i.n(n),r=i(85893),l=i(67294),d=i(86664),o=i(11163),a=i(74995),c=i(31567),u=i(63750);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function v(e,t,i,n,s,r,l){try{var d=e[r](l),o=d.value}catch(a){return void i(a)}d.done?t(o):Promise.resolve(o).then(n,s)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,s,r=[],l=!0,d=!1;try{for(i=i.call(e);!(l=(n=i.next()).done)&&(r.push(n.value),!t||r.length!==t);l=!0);}catch(o){d=!0,s=o}finally{try{l||null==i.return||i.return()}finally{if(d)throw s}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(){var e=(0,d.useStripe)(),t=(0,d.useElements)(),i=x(l.useState(null),2),n=i[0],m=i[1],f=x(l.useState(!1),2),h=f[0],p=f[1],j=(0,o.useRouter)().pathname;l.useEffect((function(){if(e){var t=new URLSearchParams(window.location.search).get("payment_intent_client_secret");t&&e.retrievePaymentIntent(t).then((function(e){var t=e.paymentIntent;switch(t.status){case"succeeded":m("Payment succeeded!"),console.log("paymentIntent: ",t);break;case"processing":m("Your payment is processing.");break;case"requires_payment_method":m("Your payment was not successful, please try again.");break;default:m("Something went wrong.")}}))}}),[e]);var y=window.location.origin?window.location.origin:"",b=function(){var i,n=(i=s().mark((function i(n){var r,l;return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n.preventDefault(),e&&t){i.next=3;break}return i.abrupt("return");case 3:return p(!0),i.next=6,e.confirmPayment({elements:t,confirmParams:{return_url:"/profile/order-history"==j?y+"/create/DuePaymentConfirmation":y+"/create/PaymentConfirmation"}});case 6:r=i.sent,console.log("payment result",r),"card_error"===(null===(l=r.error)||void 0===l?void 0:l.type)||"validation_error"===(null===l||void 0===l?void 0:l.type)?m(l.message):(console.log("error",l),m("An unexpected error occurred.")),p(!1);case 11:case"end":return i.stop()}}),i)})),function(){var e=this,t=arguments;return new Promise((function(n,s){var r=i.apply(e,t);function l(e){v(r,n,s,l,d,"next",e)}function d(e){v(r,n,s,l,d,"throw",e)}l(void 0)}))});return function(e){return n.apply(this,arguments)}}(),w=(0,c.$)().t;return(0,r.jsxs)("form",{className:"w-full",id:"payment-form",onSubmit:b,children:[(0,r.jsx)(d.PaymentElement,{id:"payment-element",options:{layout:"tabs"}}),(0,r.jsxs)("div",{className:"flex flex-row justify-start space-x-2 mb-5 items-center",children:[(0,r.jsx)(u.FPm,{}),(0,r.jsx)("div",{className:"text-cBrand text-fs14",children:"No card info will be saved"})]}),(0,r.jsxs)("div",{className:"flex flex-row ".concat("/profile/order-history"==j?"justify-center":"justify-between"," space-x-0"),children:["/profile/order-history"!=j&&(0,r.jsx)("button",{onClick:function(){return a.ZP.getState().setCurrState("choose_frame")},className:" px-12 py-2 bg-white hover:bg-gray-600 text-gray-600 hover:text-white transition-all ease-in rounded-md text-sm md:text-base font-bold shadow",children:w("Back")}),(0,r.jsx)("button",{className:"bg-cBrand text-cWhite rounded-br5 border-0 px-3 py-2 cursor-pointer font-fw600 block w-auto hover:contrast-125 disabled:opacity-50 disabled:cursor-default shadow-md",disabled:h||!e||!t,id:"submit",children:(0,r.jsx)("span",{id:"button-text",children:h?(0,r.jsx)("div",{className:"spinner",id:"spinner"}):w("Confirm Payment")})})]}),n&&(0,r.jsx)("div",{id:"payment-message",children:n})]})}},29643:function(e,t,i){i.r(t);var n=i(34051),s=i.n(n),r=i(85893),l=i(96267),d=i(80471),o=i(77747),a=i(67294),c=i(99799),u=i(40519),m=i(86664),v=i(83782),x=i(74995),f=i(54465),h=i(56001),p=i(31567),j=i(71495);function y(e,t,i,n,s,r,l){try{var d=e[r](l),o=d.value}catch(a){return void i(a)}d.done?t(o):Promise.resolve(o).then(n,s)}var b=(0,f.J)(h.b);t.default=function(e){var t=e.show_modal,i=e.setShowModal,n=(0,o.ZP)().selected_order,f=(0,x.ZP)().setClientSecret,h=(0,p.$)().t;(0,a.useEffect)((function(){f(null)}),[n]),(0,a.useEffect)((function(){f(null)}),[]);var w,g=(0,x.ZP)().clientSecret,N={clientSecret:g,appearance:{theme:"stripe"}};return(0,r.jsx)(l.Z,{show_modal:t,setShowModal:i,full_content:(0,r.jsx)("div",{className:"inline-block w-full max-w-5xl px-6 md:px-14 py-8 md:py-10 my-8 text-left align-middle transition-all delay-150 transform bg-white shadow-xl rounded-lg",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(d.Fk5,{onClick:function(){return i(!1)},className:"absolute -top-3 -right-3 md:-top-6 md:-right-10 text-3xl cursor-pointer text-gray-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-center text-2xl font-semibold mb-10",children:h("Order Details")}),(0,r.jsxs)("div",{className:"flex flex-col space-y-5",children:[(0,r.jsxs)("div",{className:"flex flex-col justify-start border rounded-lg p-5 text-gray-700",children:[(0,r.jsxs)("div",{className:"flex flex-row justify-between w-full mb-3",children:[(0,r.jsx)("div",{className:"",children:(0,r.jsxs)("div",{className:"flex flex-row justify-start h-[80px] space-x-2",children:[(0,r.jsx)("img",{className:"w-[120px] h-[80px] rounded-lg",src:c.xw+(null===n||void 0===n?void 0:n.card_image),alt:"Post Card Image",layout:"fill",objectFit:"cover"}),(0,r.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,r.jsx)("div",{children:null===n||void 0===n?void 0:n.card_name}),(0,r.jsx)("div",{children:null===n||void 0===n?void 0:n.code}),(0,r.jsxs)("div",{children:["x",null===n||void 0===n?void 0:n.quantity]})]})]})}),(0,r.jsxs)("div",{className:"flex flex-col justify-between items-end",children:[(0,r.jsxs)("div",{children:["\xa5",null===n||void 0===n?void 0:n.order_total]}),(0,r.jsx)("div",{className:"capitalize",children:(0,o.hn)(null===n||void 0===n?void 0:n.status)})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("hr",{}),(0,r.jsxs)("div",{className:"mt-3 flex flex-row justify-between",children:[(0,r.jsxs)("p",{children:[h("Order Date"),":"]}),(0,r.jsxs)("p",{children:[" ",(0,u.p6)(null===n||void 0===n?void 0:n.order_date)," "]})]})]})]}),(0,r.jsxs)("div",{className:"flex md:flex-row md:justify-between md:space-x-5 flex-col justify-start md:space-y-0 space-y-5",children:[(0,r.jsxs)("div",{className:"border rounded-lg p-5 text-gray-700 w-full",children:[(0,r.jsx)("div",{className:"pb-2 border-b text-xl font-semibold mb-3",children:h("Billing Address")}),(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2 space-x-2",children:[(0,r.jsx)("div",{children:h("Address Name")}),(0,r.jsxs)("div",{className:"text-right",children:[" ",null===n||void 0===n?void 0:n.bill_name," "]})]}),(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2 space-x-2",children:[(0,r.jsx)("div",{children:h("Mobile")}),(0,r.jsxs)("div",{className:"text-right",children:[" ",null===n||void 0===n?void 0:n.bill_phone," "]})]}),(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2 space-x-2",children:[(0,r.jsx)("div",{children:h("City")}),(0,r.jsx)("div",{className:"text-right",children:(null===n||void 0===n?void 0:n.bill_address)+", "+(null===n||void 0===n?void 0:n.bill_postcode)+", "+(null===n||void 0===n?void 0:n.bill_city)})]})]}),(0,r.jsxs)("div",{className:"border rounded-lg p-5 text-gray-700 w-full",children:[(0,r.jsx)("div",{className:"pb-2 border-b text-xl font-semibold mb-3",children:h("Shipping Address")}),(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2 space-x-2",children:[(0,r.jsx)("div",{children:h("Address Name")}),(0,r.jsxs)("div",{className:"text-right",children:[" ",null===n||void 0===n?void 0:n.ship_name," "]})]}),(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2 space-x-2",children:[(0,r.jsx)("div",{children:h("Mobile")}),(0,r.jsxs)("div",{className:"text-right",children:[" ",null===n||void 0===n?void 0:n.ship_phone," "]})]}),(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2 space-x-2",children:[(0,r.jsx)("div",{children:h("City")}),(0,r.jsx)("div",{className:"text-right",children:(null===n||void 0===n?void 0:n.ship_address)+", "+(null===n||void 0===n?void 0:n.ship_postcode)+", "+(null===n||void 0===n?void 0:n.ship_city)})]})]})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"border rounded-lg p-5 text-gray-700",children:[(0,r.jsx)("div",{className:"pb-2 border-b text-xl font-semibold mb-3",children:h("Summary")}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("div",{children:h("Sub Total")}),(0,r.jsxs)("div",{children:["\xa5",(null===n||void 0===n?void 0:n.order_total)-((null===n||void 0===n?void 0:n.authority_fee)+(null===n||void 0===n?void 0:n.shipping_fee))]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("div",{children:h("Authority Fee")}),(0,r.jsxs)("div",{children:["\xa5",null===n||void 0===n?void 0:n.authority_fee]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("div",{children:h("Shipping Fee")}),(0,r.jsxs)("div",{children:["\xa5",null===n||void 0===n?void 0:n.shipping_fee]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("div",{children:h("Applied Voucher")}),(0,r.jsxs)("div",{children:["\xa5",null===n||void 0===n?void 0:n.discount]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("div",{children:h("Type")}),(0,r.jsx)("div",{children:"cod"==(null===n||void 0===n?void 0:n.payment_method)?"COD":"Card"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t text-xl font-bold",children:[(0,r.jsx)("div",{children:h("Total")}),(0,r.jsxs)("div",{children:["\xa5",null===n||void 0===n?void 0:n.order_total]})]})]})})]}),"payment_due"===(null===n||void 0===n?void 0:n.status)&&!g&&(0,r.jsx)("div",{className:"x-center mt-5",children:(0,r.jsx)("button",{onClick:(w=s().mark((function e(){var t,r,l,d,a,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setItem("order_id",null===n||void 0===n||null===(t=n.order_payment)||void 0===t?void 0:t.order_id),localStorage.setItem("payment_id",null===n||void 0===n||null===(r=n.order_payment)||void 0===r?void 0:r.payment_id),e.next=5,(0,x.Nc)(null===n||void 0===n||null===(l=n.order_payment)||void 0===l?void 0:l.order_id,null===n||void 0===n||null===(d=n.order_payment)||void 0===d?void 0:d.payment_id);case 5:(a=e.sent)||(0,x.sc)(null===n||void 0===n?void 0:n.order_total,null===n||void 0===n||null===(c=n.order_payment)||void 0===c?void 0:c.payment_id,!1),a&&(i(!1),(0,o.tH)());case 8:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(i,n){var s=w.apply(e,t);function r(e){y(s,i,n,r,l,"next",e)}function l(e){y(s,i,n,r,l,"throw",e)}r(void 0)}))}),className:"mx-auto px-12 py-2 bg-cBrand text-white transition-all ease-in rounded-md text-md font-bold shadow",children:h("Checkout")})}),g&&(0,r.jsx)("div",{className:"my-5",children:(0,r.jsx)(m.Elements,{options:N,stripe:b,children:(0,r.jsx)(v.default,{})})}),!(null===n||void 0===n?void 0:n.review)&&"completed"===(null===n||void 0===n?void 0:n.status)&&(0,r.jsx)(j.default,{data:n,setShowModal:i})]})]})})})}}}]);